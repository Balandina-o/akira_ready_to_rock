(()=>{"use strict";var t,e={79:(t,e,s)=>{s.d(e,{L:()=>I});var o=s(128);const i=s.p+"99941997b3786859051b.png",n=s.p+"d58e7fad66a394608333.png",r=s.p+"8762009eb3c63f42f28b.png",a=s.p+"28ea86e4731d199ff3a1.png",c=s.p+"b9ff2485a3c129a1253a.jpg",l=s.p+"03a6c0856b65c2e947cf.png",d=s.p+"361791e35f1804a5eae4.png",h=s.p+"ce57d5dda79572bef984.png",u=s.p+"546f6a3c50c5f6c6103e.png",p=s.p+"50f20bc8a257e1d7b367.ogg",g=s.p+"63f05211d54c65edc7a8.ogg",m=s.p+"e1b953c52231a8da2661.ogg",f={Akira:new o.bEs(i),AkiraOfficialArt:new o.bEs(n),AkiraDlcTempArt:new o.bEs(r),MainMenuBackground:new o.bEs(a),DlcMenuBackground:new o.bEs(c),GameLogo:new o.bEs(l),StartGameBtn:new o.bEs(d),StartGameBtnHover:new o.bEs(h),LightningPoint:new o.bEs(u),MainMenuMusic:new o.ABN(p),DlcMenuMusic:new o.ABN(g),LevelBackgroundMusic:new o.ABN(m)},w=new o.aHM;for(const t of Object.values(f))w.addResource(t);class v extends o.Agj{constructor(){super({name:"AkiraOfficialArt",pos:(0,o.t6s)(0,370),width:1,height:1})}onInitialize(){this.graphics.add(f.AkiraOfficialArt.toSprite()),this.actions.moveBy({offset:(0,o.t6s)(290,0),durationMs:300}),this.actions.moveBy({offset:(0,o.t6s)(100,0),durationMs:1e3}),this.actions.repeatForever((t=>{t.moveBy({offset:(0,o.t6s)(0,10),durationMs:500}),t.moveBy({offset:(0,o.t6s)(-5,0),durationMs:300}),t.moveBy({offset:(0,o.t6s)(0,-10),durationMs:500}),t.moveBy({offset:(0,o.t6s)(5,0),durationMs:500})})),this.on("pointerdown",(t=>{console.log("You clicked the actor @",t.worldPos.toString()),f.MainMenuMusic.stop(),I.goToScene("dlcMenu")}))}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreCollisionResolve(t,e,s,o){}onPostCollisionResolve(t,e,s,o){}onCollisionStart(t,e,s,o){}onCollisionEnd(t,e,s,o){}}class b extends o.Agj{constructor(){super({name:"GameLogo",pos:(0,o.t6s)(720,0),width:50,height:50})}onInitialize(){this.graphics.add(f.GameLogo.toSprite()),this.actions.moveBy({offset:(0,o.t6s)(0,150),durationMs:300})}}class y extends o.Agj{constructor(){super({name:"MenuBackground",pos:(0,o.t6s)(600,400)})}onInitialize(){this.graphics.add(f.MainMenuBackground.toSprite())}}class M extends o.Agj{constructor(){super({name:"StartGameBtn",pos:(0,o.t6s)(1500,550),width:20,height:20})}onInitialize(){this.graphics.add(f.StartGameBtn.toSprite()),this.actions.moveBy({offset:(0,o.t6s)(-600,0),durationMs:300}),this.on("pointerenter",(t=>{this.graphics.add(f.StartGameBtnHover.toSprite())})),this.on("pointerleave",(t=>{this.graphics.add(f.StartGameBtn.toSprite())})),this.on("pointerdown",(t=>{f.MainMenuMusic.stop(),I.goToScene("level")}))}}class B{constructor(t,e){this.scene=t,this.numberDialog=-1,this.currentWorldPos=(0,o.t6s)(0,0);const s=document.getElementById("dialog"),i=document.getElementById("dialog-button"),n=document.getElementById("dialog-text"),r=document.getElementById("shadow-background-plug");if(setTimeout((()=>{this.show(),this.anotherFunc()}),0),!(s&&i&&n))throw Error("Could not initialize menu, element with id='menu'");this.rootElement=s,this.dialogButton=i,this.dialogText=n,this.shadow1=r,this.messages=e,this.dialogButton.addEventListener("click",(t=>{this.anotherFunc()}))}anotherFunc(){this.dialogText.textContent="",this.numberDialog++,this.numberDialog<this.messages.length?this.typeWriter():this.hide()}typeWriter(){var t=0;console.log(this.messages[this.numberDialog],this.messages,this.numberDialog);let e=this;!function s(){t<e.messages[e.numberDialog].length&&(console.log(t,e.messages[e.numberDialog].length),document.getElementById("dialog-text").innerHTML+=e.messages[e.numberDialog].charAt(t),t++,setTimeout(s,50))}()}show(){this.shadow1.classList.remove("element-hide"),this.rootElement.classList.remove("expansion-hide"),this.rootElement.classList.add("element-show")}hide(){this.rootElement.classList.remove("element-show"),this.rootElement.classList.add("expansion-hide"),this.shadow1.classList.add("element-hide")}}class S extends o.Z58{constructor(){super(...arguments),this.startGame=new o.NBt({x:0,y:0,z:2})}onInitialize(t){const e=new y,s=new v,o=new b,i=new M;this.add(e),this.add(s),this.add(o),this.add(i),this.add(this.startGame)}onPreLoad(t){}onActivate(t){setTimeout((()=>{new B(I.currentScene,["ПРивеТ! Это Отоиши Акира на связи, если ты запустил эту игру, то ты явно готов пошуметь и взорвать парочку сцен","*гитарный риф*","go, rockstar!!"])}),1e3),f.MainMenuMusic.loop=!0,f.MainMenuMusic.play()}onDeactivate(t){}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreDraw(t,e){}onPostDraw(t,e){}}class P extends o.Agj{constructor(t){super({pos:t,width:20,height:20}),this.on("exitviewport",(()=>this.kill()))}onInitialize(){this.graphics.add(f.LightningPoint.toSprite()),this.actions.moveBy({offset:(0,o.t6s)(0,1e3),durationMs:6e3}),this.on("pointerdown",(t=>{console.log("You clicked the actor @",t.worldPos.toString())}))}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreCollisionResolve(t,e,s,o){}onPostCollisionResolve(t,e,s,o){}onCollisionStart(t,e,s,o){}onCollisionEnd(t,e,s,o){}}class k extends o.Agj{constructor(t){super({name:"UltraSuperGuitarist",width:20,height:20,pos:o.t6s(150,550)}),this.level=t,this.playing=!1,this.jumping=!1}onInitialize(){const t=o.FLG.fromImageSource({image:f.Akira,grid:{rows:8,columns:9,spriteWidth:25,spriteHeight:65}});this.startSprite=t.getSprite(1,0),this.leftAnimation=o.X55.fromSpriteSheet(t,[3,4,5,6,7],100),this.rightAnimation=o.X55.fromSpriteSheet(t,[3,4,5,6,7],100),this.graphics.add("left",this.leftAnimation),this.graphics.add("right",this.rightAnimation),this.graphics.add("start",this.startSprite),this.graphics.use("start")}isInputActive(t){return t.input.keyboard.isHeld(o.D$R.Space)||t.input.pointers.isDown(0)}onPreUpdate(t,e){this.vel.x=0}onCollisionStart(t,e){e.owner instanceof P&&(this.level.incrementScore(),e.owner.kill())}onPostUpdate(t){this.playing&&(t.input.keyboard.isHeld(o.D$R.Left)&&(this.vel.x=-150),t.input.keyboard.isHeld(o.D$R.Right)&&(this.vel.x=150))}start(){this.playing=!0}reset(){this.stop()}stop(){this.playing=!1,this.vel=o.t6s(0,0),this.acc=o.t6s(0,0)}}class x{constructor(t,e,s){this.level=t,this.random=e,this.timer=new o.M4G({interval:s,repeats:!0,action:()=>this.spawnLightnings()}),this.level.add(this.timer)}spawnLightnings(){const t=this.random.floating(0,3e3),e=new P(o.t6s(t,0));this.level.add(e)}start(){this.timer.start()}reset(){for(const t of this.level.actors)t instanceof P&&t.kill()}stop(){this.timer.stop();for(const t of this.level.actors)t instanceof P&&(t.vel=o.t6s(0,0))}}class E extends o.Z58{constructor(){super(...arguments),this.akira=new k(this),this.random=new o.o8N,this.lightningFactory=new x(this,this.random,600),this.score=0,this.best=0,this.scoreLabel=new o.JU7({text:"Score: 0",x:0,y:0,z:1,font:new o.KQV({size:20,color:o.Q1f.Black})})}showStartInstructions(){this.akira.start(),this.lightningFactory.start()}onInitialize(t){new k(this);const e=new P((0,o.t6s)(150,0));this.add(e),this.add(this.akira),this.add(this.scoreLabel),this.showStartInstructions()}incrementScore(){this.scoreLabel.text="Score: "+ ++this.score}onPreLoad(t){}onActivate(t){f.LevelBackgroundMusic.loop=!0,f.LevelBackgroundMusic.play()}onDeactivate(t){}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreDraw(t,e){}onPostDraw(t,e){}}class A extends o.Agj{constructor(){super({name:"DlcMenuBackground",pos:(0,o.t6s)(600,400)})}onInitialize(){this.graphics.add(f.DlcMenuBackground.toSprite())}}class L{constructor(t){this.scene=t,this.currentWorldPos=(0,o.t6s)(0,0),t.input.pointers.on("down",(e=>{this.show(),this.currentWorldPos=t.engine.screen.pageToWorldCoordinates((0,o.t6s)(e.pagePos.x,e.pagePos.y)),document.documentElement.style.setProperty("--pointer-x",e.pagePos.x.toString()+"px"),document.documentElement.style.setProperty("--pointer-y",e.pagePos.y.toString()+"px")}));const e=document.getElementById("menu"),s=document.getElementById("add-unit"),i=document.getElementById("remove-unit");if(!(e&&s&&i))throw Error("Could not initialize menu, element with id='menu'");this.rootElement=e,this.addUnitButton=s,this.removeUnitButton=i,this.addUnitButton.addEventListener("click",(t=>{this.addUnit()})),this.removeUnitButton.addEventListener("click",(t=>{this.removeUnit()}))}addUnit(){const t=new o.Agj({pos:this.currentWorldPos,scale:(0,o.t6s)(2,2),color:o.Q1f.Red});this.scene.add(t),this.hide()}removeUnit(){for(let t of this.scene.actors)t.graphics.bounds.contains(this.currentWorldPos)&&t.kill();this.hide()}show(){this.rootElement.classList.remove("hide"),this.rootElement.classList.add("show")}hide(){this.rootElement.classList.remove("show"),this.rootElement.classList.add("hide")}}class D extends o.NBt{constructor(){super({name:"AkiraDlcTempArt",x:-580,y:-100})}onInitialize(){this.graphics.add(f.AkiraDlcTempArt.toSprite()),this.actions.moveBy({offset:(0,o.t6s)(290,0),durationMs:300}),this.actions.repeatForever((t=>{t.moveBy({offset:(0,o.t6s)(0,10),durationMs:500}),t.moveBy({offset:(0,o.t6s)(-5,0),durationMs:300}),t.moveBy({offset:(0,o.t6s)(0,-10),durationMs:500}),t.moveBy({offset:(0,o.t6s)(5,0),durationMs:500})})),this.on("pointerdown",(t=>{console.log("You clicked the actor @",t.worldPos.toString()),f.MainMenuMusic.stop(),I.goToScene("dlcMenu")}))}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreCollisionResolve(t,e,s,o){}onPostCollisionResolve(t,e,s,o){}onCollisionStart(t,e,s,o){}onCollisionEnd(t,e,s,o){}}class U extends o.Z58{constructor(){super(...arguments),this.startGame=new o.NBt({x:0,y:0,z:2})}onInitialize(t){const e=new A,s=new D,o=new b,i=new M;this.add(e),this.add(o),this.add(s),this.add(i),this.add(this.startGame)}onPreLoad(t){}onActivate(t){new L(I.currentScene);f.DlcMenuMusic.loop=!0,f.DlcMenuMusic.play()}onDeactivate(t){}onPreUpdate(t,e){}onPostUpdate(t,e){}onPreDraw(t,e){}onPostDraw(t,e){}}const I=new o.N$8({width:1200,height:760,backgroundColor:o.Q1f.fromHex("f6acfc"),displayMode:o.q5Z.Fixed,pixelArt:!0,scenes:{mainMenu:{scene:S},dlcMenu:{scene:U,transitions:{in:new o.i_4({duration:500,direction:"in",color:o.Q1f.Black}),out:new o.i_4({duration:500,direction:"out",color:o.Q1f.Black})}},level:{scene:E,transitions:{in:new o.i_4({duration:500,direction:"in",color:o.Q1f.Black}),out:new o.i_4({duration:500,direction:"out",color:o.Q1f.Black})}}},physics:{solver:o.bAZ.Realistic,substep:5}});I.start("mainMenu",{loader:w,inTransition:new o.i_4({duration:800,direction:"in",color:o.Q1f.ExcaliburBlue})}).then((()=>{}))}},s={};function o(t){var i=s[t];if(void 0!==i)return i.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,o),n.exports}o.m=e,t=[],o.O=(e,s,i,n)=>{if(!s){var r=1/0;for(d=0;d<t.length;d++){for(var[s,i,n]=t[d],a=!0,c=0;c<s.length;c++)(!1&n||r>=n)&&Object.keys(o.O).every((t=>o.O[t](s[c])))?s.splice(c--,1):(a=!1,n<r&&(r=n));if(a){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,i,n]},o.d=(t,e)=>{for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=s[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={792:0};o.O.j=e=>0===t[e];var e=(e,s)=>{var i,n,[r,a,c]=s,l=0;if(r.some((e=>0!==t[e]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(c)var d=c(o)}for(e&&e(s);l<r.length;l++)n=r[l],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(d)},s=self.webpackChunkakira=self.webpackChunkakira||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var i=o.O(void 0,[128],(()=>o(79)));i=o.O(i)})();
//# sourceMappingURL=main.js.map